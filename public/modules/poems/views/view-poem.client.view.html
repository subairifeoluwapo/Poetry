<section data-ng-controller="PoemsController" data-ng-init="findOne()">
	<div name="poemHouse">
		<div class="pull-left" data-ng-show="authentication.user._id == poem.user._id">
			<a class="btn btn-primary" href="/#!/poems/{{poem._id}}/edit">
				<i class="glyphicon glyphicon-edit"></i>
			</a>
			<a class="btn btn-danger" data-ng-click="remove();">
				<i class="glyphicon glyphicon-trash"></i>
			</a>
		</div>
		<br>
		<div name="summaryBoard" class="pull-right">
			<i class="glyphicon glyphicon-dashboard"></i> Dash Board
			<small>
				<em class="text-muted">
					Posted on
					<span data-ng-bind="poem.created | date:'mediumDate'"></span>
					<br>
					by
					<span data-ng-bind="poem.user.displayName"></span>
					<br>
		            Poem category:
		            <span data-ng-bind="poem.category"></span>
				</em>
			</small>
			<p>{{poem.comments.length}} Comment(s)</p>
			<p>{{poem.likes.length}} Like(s)</p>
			<span data-ng-show="authentication.user._id && checkUserPoemLikes(poem.likes)">
				<img src="/modules/poems/img/like.png">
				<br>
				<p>You like this</p>
			</span>
		</div>
		<div class="page-header">
			<h1 data-ng-bind="poem.title"></h1>
		</div>
		<div>
			<p class="lead" data-ng-bind="poem.content"></p>
		<div>
		<br>
		<br>
		<div data-ng-hide="authentication.user._id == poem.user._id">
			<a class="btn btn-primary" type="button" value="Like" data-ng-show="authentication.user._id && !liked" data-ng-click="likePoem()">
				<i class="glyphicon glyphicon-thumbs-up"></i>
			</a>
			<a class="btn btn-danger" type="button" value="Dislike" data-ng-show="authentication.user._id && liked" data-ng-click="unlikePoem()">
				<i class="glyphicon glyphicon-thumbs-down"></i>
			</a>
		</div>
		<br>
	</div>

	<div class="form-group">
        <label class="control-label" for="comment">Comment</label>
        <div class="controls">
            <textarea name="comment" data-ng-model="commentMade" id="comment" class="form-control" cols="10" rows="5" placeholder="Make a comment here"></textarea>
        </div>
    </div>
	<a class="btn btn-primary btn-block" type="button" value="Send" data-ng-click="makeComment()">
		<i class="glyphicon glyphicon-comment"></i> Post
	</a>
	<br>
	<br>
	<div name="commentHouse" ng-repeat="comment in poem.comments | filter: comment.created">
		{{"by"}} {{"  "}} {{poem.user.displayName}}{{", "}}
		{{"posted on"}}{{"  "}}{{comment.created | date: 'mediumDate'}}
		<br>
		<div name="commentRoom">
			{{comment.comment}}
		</div>
		<br>
		<div name="thumpsUpComment">
			<span data-ng-show="authentication.user._id && checkUserCommentLikes(comment.likes)">
				<img name="thumbsUpImage" src="/modules/poems/img/like.png">
				<br>
				<p>You like this</p>
			</span>
		</div>
		<div  data-ng-hide="authentication.user._id == poem.user._id">
		<a class="btn btn-primary" type="button" name="comment._id" value="Like" data-ng-show="authentication.user._id !== comment.creator && !likedCom" data-ng-click="likeComment()">
			<i class="glyphicon glyphicon-thumbs-up"></i>
		</a>
		<a class="btn btn-danger" type="button" name="comment._id" value="Dislike" data-ng-show="authentication.user._id !== comment.creator && likedCom" data-ng-click="unlikeComment()">
			<i class="glyphicon glyphicon-thumbs-down"></i>
		</a>
		</div>
		<div data-ng-show="poem.user._id == authentication.user._id">
		<a class="btn btn-danger" type="button" value= "Delete" data-ng-click="deleteComment(comment)">
			<i class="glyphicon glyphicon-trash"></i>
		</a>
		</div>
	</div>
	<div class="alert alert-warning text-center" data-ng-if="!poem.comments.length">
    	No Comments yet, go ahead and express your understanding of the poem.
    </div>
</section>