<section data-ng-controller="PoemsController" data-ng-init="findOne()">
	<div class="jumbotron text-center">
		<div class="page-header">
			<h1 data-ng-bind="poem.title"></h1>
		</div>
		<div class="pull-right" data-ng-show="authentication.user._id == poem.user._id">
			<a class="btn btn-primary" href="/#!/poems/{{poem._id}}/edit">
				<i class="glyphicon glyphicon-edit"></i>
			</a>
			<a class="btn btn-primary" data-ng-click="remove();">
				<i class="glyphicon glyphicon-trash"></i>
			</a>
		</div>
		<small>
			<em class="text-muted">
				Posted on
				<span data-ng-bind="poem.created | date:'mediumDate'"></span>
				by
				<span data-ng-bind="poem.user.displayName"></span>
				<br>
	            Poem category:
	            <span data-ng-bind="poem.category"></span>
			</em>
		</small>
		<div>
			<p>{{poem.comments.length}} Comment(s)</p>
			<br>
			<p>{{poem.likes.length}} Like(s)</p>
			<br>
			<span data-ng-show="authentication.user._id && checkUserPoemLikes(poem.likes)"><strong style="color: brown">You have liked this Poem</strong></span>
		</div>
		<div>
			<p class="lead" data-ng-bind="poem.content"></p>
		<div>
		<br>
		<br>
		<div data-ng-hide="authentication.user._id == poem.user._id">
			<input type="button" value="Like" data-ng-show="authentication.user._id && !liked" data-ng-click="likePoem()">
			<input type="button" value="Dislike" data-ng-show="authentication.user._id && liked" data-ng-click="unlikePoem()">
		</div>
		<br>
		<div class="form-group">
	        <label class="control-label" for="comment">Comment</label>
	        <div class="controls">
	            <textarea name="comment" data-ng-model="commentMade" id="comment" class="form-control" cols="5" rows="5" placeholder="Make a comment here"></textarea>
	        </div>
	    </div>
		<input type="button" value="comment" data-ng-click="makeComment()">
		<br>
		<br>
		<div ng-repeat="comment in poem.comments | filter: comment.created">
			{{"by"}}{{comment.creator}}
			<br>
			{{"posted on"}}{{comment.created | date: 'mediumDate'}}
			<br>
			{{comment.comment}}
			<span data-ng-show="authentication.user._id && checkUserCommentLikes(comment.likes)"><strong style="color: brown">You liked this comment</strong></span>
			<div  data-ng-hide="authentication.user._id == poem.user._id">
			<input type="button" name="comment._id" value="Like" data-ng-show="authentication.user._id !== comment.creator && !likedCom" data-ng-click="likeComment()">
			<input type="button" name="comment._id" value="Dislike" data-ng-show="authentication.user._id !== comment.creator && likedCom" data-ng-click="unlikeComment()">
			</div>
			<div data-ng-show="poem.user._id == authentication.user._id">
			<input type="button" value= "Delete" data-ng-click="deleteComment(comment);">
			</div>
		</div>
	</div>
</section>